---
import Base from './Base.astro';
import ReadingProgress from '../components/ReadingProgress.astro';

export interface Props {
  title: string;
  description: string;
  pubDate?: Date;
  reading_time?: number;
  topic?: string;
  tags?: string[];
  image?: string;
  author?: string;
}

const {
  title,
  description,
  pubDate,
  reading_time = 5,
  topic = 'Technology',
  tags = [],
  image,
  author = 'Neural Niki'
} = Astro.props;

const formattedDate = pubDate?.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<Base title={`${title} | Neural Niki`} description={description} image={image} article={true} publishedTime={pubDate}>
  <!-- Reading Progress Bar -->
  <ReadingProgress />

  <article itemscope itemtype="https://schema.org/Article">
    <!-- Hero Image Banner -->
    {image && (
      <div class="hero-banner">
        <img src={image} alt={title} />
        <div class="hero-banner-overlay"></div>
      </div>
    )}

    <!-- Article Header -->
    <header style="max-width: 720px; margin: 0 auto; padding: 3rem 1.5rem 0;">
      {topic && (
        <span class="badge" style="margin-bottom: 1rem;">
          {topic}
        </span>
      )}
      
      <h1 itemprop="headline" style="font-size: clamp(2rem, 5vw, 3rem); font-weight: 700; line-height: 1.15; margin: 0 0 1.5rem 0; letter-spacing: -0.03em;">
        {title}
      </h1>
      
      <p itemprop="description" style="font-size: 1.25rem; line-height: 1.6; color: var(--text-tertiary); margin: 0 0 2rem 0;">
        {description}
      </p>
      
      <div style="display: flex; align-items: center; gap: 1rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border-color);">
        <time datetime={pubDate?.toISOString()} itemprop="datePublished" style="font-size: 0.9rem; color: var(--text-tertiary); font-weight: 500;">
          {formattedDate}
        </time>
        <span style="color: var(--text-muted);">Â·</span>
        <span style="font-size: 0.9rem; color: var(--text-tertiary);">
          {reading_time} min read
        </span>
      </div>
    </header>

    <!-- Article Body -->
    <div class="prose" style="padding: 2.5rem 1.5rem;">
      <slot />
    </div>

    <!-- Article Footer -->
    <footer style="max-width: 720px; margin: 0 auto; padding: 2rem 1.5rem 4rem; border-top: 1px solid var(--border-color);">
      <div style="display: flex; flex-direction: column; gap: 1.5rem;">
        <div>
          <p style="font-size: 0.875rem; color: var(--text-muted); margin: 0 0 0.5rem 0;">
            Written by
          </p>
          <h3 style="font-size: 1.125rem; font-weight: 700; margin: 0;">
            {author}
          </h3>
        </div>
        
        {tags && tags.length > 0 && (
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
            {tags.map((tag) => (
              <span class="badge">
                {tag}
              </span>
            ))}
          </div>
        )}
      </div>
    </footer>
  </article>
</Base>
