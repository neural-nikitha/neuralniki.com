---
import { getCollection } from 'astro:content';
import Base from '../layouts/Base.astro';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);

const title = 'Neural Niki';
const description = 'A minimal blog exploring AI, technology, investing, and startup economics.';
---

<Base {title} {description}>
  <!-- Premium Hero Section -->
  <section class="py-hero">
    <div class="container">
      <div style="text-align: center; max-width: 800px; margin: 0 auto;">
        <h1 style="margin: 0 0 1.5rem 0; font-size: clamp(2.5rem, 8vw, 4.5rem);">
          Essays on <span class="text-accent">AI, investing, and technology</span>
        </h1>
        <p style="margin: 0; font-size: 1.25rem; color: var(--text-secondary); line-height: 1.8;">
          Deep analysis without the hype. Straight insights on artificial intelligence, startup economics, and the future of work.
        </p>
        
        <div style="margin-top: 2rem; display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
          <a href="/posts" class="btn btn-primary">Read Articles</a>
          <a href="/about" class="btn btn-secondary">About Me</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Latest Articles -->
  <section class="py-section">
    <div class="container">
      <div style="text-align: center; margin-bottom: 3rem;">
        <h2 style="margin: 0 0 0.5rem 0;">Latest Articles</h2>
        <p style="margin: 0; color: var(--text-secondary); font-size: 1.05rem;">
          Fresh perspectives on technology and markets
        </p>
      </div>

      {sortedPosts.length === 0 ? (
        <div style="text-align: center; padding: 2rem;">
          <p style="color: var(--text-secondary); font-size: 1.1rem;">
            No posts published yet.
          </p>
        </div>
      ) : (
        <div class="grid-3">
          {sortedPosts.slice(0, 6).map((post) => (
            <a href={`/posts/${post.slug}`} class="article-card" style="text-decoration: none;">
              {post.data.heroImage && (
                <div class="article-card-image">
                  <img src={post.data.heroImage} alt={post.data.title} />
                </div>
              )}
              
              <div class="article-card-content">
                <div class="article-card-meta">
                  <span class="badge" style="display: inline-block; padding: 0.25rem 0.75rem; font-size: 0.8rem;">
                    {post.data.topic}
                  </span>
                  <span style="color: var(--text-tertiary); font-size: 0.9rem;">
                    {post.data.reading_time} min
                  </span>
                </div>
                
                <h3 class="article-card-title">
                  {post.data.title}
                </h3>
                
                <p class="article-card-description">
                  {post.data.description}
                </p>
                
                <div style="margin-top: auto;">
                  <time style="font-size: 0.85rem; color: var(--text-tertiary);">
                    {post.data.pubDate.toLocaleDateString('en-US', {
                      year: 'numeric',
                      month: 'short',
                      day: 'numeric',
                    })}
                  </time>
                  <div class="article-card-read" style="margin-top: 1rem;">
                    Read Article â†’
                  </div>
                </div>
              </div>
            </a>
          ))}
        </div>
      )}

      {sortedPosts.length > 6 && (
        <div style="text-align: center; margin-top: 3rem;">
          <a href="/posts" class="btn btn-secondary">View All Articles</a>
        </div>
      )}
    </div>
  </section>
</Base>

<style is:global>
  a:hover {
    color: var(--accent-hover) !important;
  }
</style>
