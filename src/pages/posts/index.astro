---
import { getCollection } from 'astro:content';
import Base from '../../layouts/Base.astro';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const title = 'All Articles | Neural Niki';
const description = 'Read all published articles on AI, technology, and investing.';
---

<Base {title} {description}>
  <!-- Page Header -->
  <section class="py-section" style="background: var(--bg-secondary);">
    <div class="container">
      <div style="max-width: 720px;">
        <h1 style="margin: 0 0 1rem 0; font-size: clamp(2rem, 5vw, 3rem); font-weight: 700; letter-spacing: -0.03em;">
          All Articles
        </h1>
        <p style="margin: 0; color: var(--text-tertiary); font-size: 1.125rem; line-height: 1.6;">
          {sortedPosts.length} {sortedPosts.length === 1 ? 'article' : 'articles'} on AI, technology, investing, and more.
        </p>
      </div>
    </div>
  </section>

  <!-- Articles Grid -->
  <section class="py-section">
    <div class="container">
      {sortedPosts.length === 0 ? (
        <p style="text-align: center; color: var(--text-tertiary); font-size: 1.1rem;">
          No posts published yet.
        </p>
      ) : (
        <div class="grid-2">
          {sortedPosts.map((post) => (
            <a href={`/posts/${post.slug}`} class="article-card" style="text-decoration: none;">
              {post.data.heroImage && (
                <div class="article-card-image">
                  <img src={post.data.heroImage} alt={post.data.title} loading="lazy" />
                </div>
              )}
              
              <div class="article-card-content">
                <div class="article-card-meta">
                  <span class="badge">
                    {post.data.topic}
                  </span>
                  <span style="color: var(--text-tertiary); font-size: 0.875rem;">
                    {post.data.reading_time} min
                  </span>
                </div>
                
                <h2 class="article-card-title">
                  {post.data.title}
                </h2>
                
                <p class="article-card-description">
                  {post.data.description}
                </p>
                
                <div style="margin-top: auto;">
                  <time style="font-size: 0.85rem; color: var(--text-tertiary);">
                    {post.data.pubDate.toLocaleDateString('en-US', {
                      year: 'numeric',
                      month: 'short',
                      day: 'numeric',
                    })}
                  </time>
                  <div class="article-card-read">
                    Read Article â†’
                  </div>
                </div>
              </div>
            </a>
          ))}
        </div>
      )}
    </div>
  </section>
</Base>
