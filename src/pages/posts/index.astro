---
import { getCollection } from 'astro:content';
import Base from '../../layouts/Base.astro';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const title = 'All Articles | Neural Niki';
const description = 'Read all published articles on AI, technology, and investing.';
---

<Base {title} {description}>
  <!-- Page Header -->
  <section class="py-hero" style="border-bottom: var(--border-light);">
    <div class="container">
      <div class="article-container" style="text-align: center;">
        <h1 style="margin: 0 0 1rem 0;">All Articles</h1>
        <p style="margin: 0; font-size: 1.1rem; color: var(--text-secondary);">
          {sortedPosts.length} {sortedPosts.length === 1 ? 'article' : 'articles'} • Deep dives into AI, investing, and technology
        </p>
      </div>
    </div>
  </section>

  <!-- Articles Grid -->
  <section class="py-section">
    <div class="container">
      {sortedPosts.length === 0 ? (
        <div style="text-align: center; padding: 4rem 2rem;">
          <p style="color: var(--text-secondary); font-size: 1.1rem;">
            No posts published yet.
          </p>
        </div>
      ) : (
        <div class="grid-3">
          {sortedPosts.map((post) => (
            <a href={`/posts/${post.slug}`} class="article-card" style="text-decoration: none;">
              {post.data.heroImage && (
                <div class="article-card-image">
                  <img src={post.data.heroImage} alt={post.data.title} />
                </div>
              )}
              
              <div class="article-card-content">
                <div class="article-card-meta">
                  <span class="badge" style="display: inline-block; padding: 0.25rem 0.75rem; font-size: 0.8rem;">
                    {post.data.topic}
                  </span>
                  <span style="color: var(--text-tertiary); font-size: 0.9rem;">
                    {post.data.reading_time} min
                  </span>
                </div>
                
                <h2 class="article-card-title">
                  {post.data.title}
                </h2>
                
                <p class="article-card-description">
                  {post.data.description}
                </p>
                
                <div style="margin-top: auto;">
                  <time style="font-size: 0.85rem; color: var(--text-tertiary);">
                    {post.data.pubDate.toLocaleDateString('en-US', {
                      year: 'numeric',
                      month: 'short',
                      day: 'numeric',
                    })}
                  </time>
                  <div class="article-card-read" style="margin-top: 1rem;">
                    Read Article →
                  </div>
                </div>
              </div>
            </a>
          ))}
        </div>
      )}
    </div>
  </section>
</Base>

<style is:global>
  a:hover {
    color: var(--accent-hover) !important;
  }
</style>
